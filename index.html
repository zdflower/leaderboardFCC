<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <title></title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <div id="root"></div>

  <script src="babel.min.js"></script>
  <script src="react.js"></script>
  <script src="react-dom.js"></script>
  <script type="text/babel">

    const alltime = [{"username":"sjames1958gm","img":"https://avatars1.githubusercontent.com/u/4639625?v=4","alltime":8597,"recent":116,"lastUpdate":"2018-02-03T18:14:36.182Z"},{"username":"Manish-Giri","img":"https://avatars2.githubusercontent.com/u/11348778?v=4","alltime":6465,"recent":9,"lastUpdate":"2018-02-03T19:01:33.088Z"},{"username":"anthonygallina1","img":"https://avatars.githubusercontent.com/u/11003055?v=3","alltime":5477,"recent":24,"lastUpdate":"2018-02-03T19:06:48.785Z"}];

    const recent = [{"username":"sjames1958gm","img":"https://avatars1.githubusercontent.com/u/4639625?v=4","alltime":8597,"recent":116,"lastUpdate":"2018-02-03T18:14:36.182Z"},{"username":"rahsheen","img":"https://avatars1.githubusercontent.com/u/4641959?v=4","alltime":1053,"recent":82,"lastUpdate":"2018-02-03T18:14:37.726Z"},{"username":"kbaig","img":"https://avatars3.githubusercontent.com/u/24844214?v=4","alltime":246,"recent":72,"lastUpdate":"2018-02-03T19:13:34.200Z"},{"username":"zcassini","img":"https://avatars1.githubusercontent.com/u/373576?v=4","alltime":1634,"recent":67,"lastUpdate":"2018-02-03T19:13:34.201Z"}];

    class Page extends React.Component {
      constructor(){
        super();
        this.state = {
                       order: 'recent'
        }
      }
      
      handleOrderRecent() {
          this.setState({
          order: 'recent'
        });
      }

      handleOrderAlltime() {
          this.setState({
          order: 'alltime'
        });
      }

      render() {
        return (
          <div className="page">
            <Header />
            <Table onClickRecent= {() => this.handleOrderRecent() } onClickAlltime={() => this.handleOrderAlltime() } order={this.state.order} />
          </div>
        );
      }
  }

    function Header() {
      return (
        <header>
          <h1>FreeCodeCamp Leaderboard</h1>
        </header>  
      )
    }

  /* Ver si puedo usar un componente funcional para las filas */
  class Filas extends React.Component { 
    render(){
      let data = [];
      (this.props.order === 'recent') ? data = recent : data = alltime;

      return (
        <tbody>
          { 
          
          data.map((fila, i) => {
          return (
              <tr key={fila.username}>
                <td> {i + 1}</td>
                <td><img src={fila.img} />{fila.username}</td>
                <td>{fila.recent}</td>
                <td>{fila.alltime}</td>
              </tr>
            );
           })
          }
        </tbody>
      )      
  }
}

    function Table(props) {
      return (
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              { 
                (props.order === 'recent')? <th><span onClick={props.onClickRecent}>Recent points *</span></th>
                 : <th> <span onClick={props.onClickRecent}>Recent points</span></th>
              }
              {
                (props.order === 'alltime')? <th><span onClick={props.onClickAlltime}>All points *</span></th> : <th><span onClick={props.onClickAlltime}>All points </span></th>
              }
             </tr>
          </thead>
          <Filas order={props.order}/>
        </table>
      )
    }

    ReactDOM.render(<Page />, document.getElementById("root"));

  </script>
</body>

</html>